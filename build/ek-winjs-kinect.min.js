!function(){"use strict";var a=function(){this.pointer=new EkWinjs.KinectPointer(this)},b={id:0,pointer:null,pointMultiplier:1,trackArea:{x:.5,z:1,dephX:.2,dephZ:.1,handPushZ:.25},rightHand:{x:0,y:0,z:0},leftHand:{x:0,y:0,z:0},head:{x:0,y:0,z:0},neck:{x:0,y:0,z:0},spineShoulder:{x:0,y:0,z:0},spineMid:{x:0,y:0,z:0},spineBase:{x:0,y:0,z:0},shoulderRight:{x:0,y:0,z:0},elbowRight:{x:0,y:0,z:0},wristRight:{x:0,y:0,z:0},handTipRight:{x:0,y:0,z:0},thumbRight:{x:0,y:0,z:0},shoulderLeft:{x:0,y:0,z:0},elbowLeft:{x:0,y:0,z:0},thumbLeft:{x:0,y:0,z:0},wristLeft:{x:0,y:0,z:0},hipRight:{x:0,y:0,z:0},kneeRight:{x:0,y:0,z:0},ankleRight:{x:0,y:0,z:0},footRight:{x:0,y:0,z:0},hipLeft:{x:0,y:0,z:0},kneeLeft:{x:0,y:0,z:0},ankleLeft:{x:0,y:0,z:0},footLeft:{x:0,y:0,z:0},isTracked:!1,handLeftTracked:!1,handRightTracked:!1,render:function(){this.pointer.render()},startSimulate:function(){this.pointer.startSimulate()},stopSimulate:function(){this.pointer.stopSimulate()},_name:"",_funct:function(){}},c={},d=WinJS.Class.define(a,b,c);WinJS.Namespace.define("EkWinjs",{kinectBodyData:d})}(),function(){"use strict";var a=null,b=null,c=function(){a=this},d={setDebugs:function(a){this._debugs=a},trackBodyOn:function(c,d,e,f){return a._selectedBody=new EkWinjs.kinectBodyData,a._selectedBody.trackArea.x=c,a._selectedBody.trackArea.z=e,a._selectedBody.trackArea.dephX=d,a._selectedBody.trackArea.dephZ=f,b&&a._selectedBody.startSimulate(),a._selectedBody},getSelectedBody:function(){return a._selectedBody},getPixelPoint:function(b,c,d){d||(d=a._autoMultiplier);var e=c*d,f=.5*(e-c);return b*e-f},setFrameSize:function(a,b){this._frameWidth=a,this._frameHeight=b},start:function(a,b,c){this._bodyFrameReader=a.openReader(),this._bodyImageProcessor=KinectImageProcessor.BodyHelper,this._bodies=new Array(a.bodyCount),this._JointType=b,this._jointCount=c,this._bones=this._populateBones(),this._bodyFrameReader.addEventListener("framearrived",this._reader_BodyFrameArrived)},startSimulate:function(){b=!0,a._selectedBody&&a._selectedBody.startSimulate()},stopSimulate:function(){b=!1,a._selectedBody&&a._selectedBody.stopSimulate()},close:function(){this._bodyFrameReader&&this._bodyFrameReader.removeEventListener("framearrived",this._reader_BodyFrameArrived),this._bodyFrameReader=null},_bodyFrameReader:null,_bodyImageProcessor:null,_bodies:null,_bones:null,_JointType:null,_jointCount:null,_frameWidth:0,_frameHeight:0,_selectedBody:null,_debugs:null,_populateBones:function(){var a=new Array,b=window.WindowsPreview.Kinect.JointType;return a.push({jointStart:b.head,jointEnd:b.neck}),a.push({jointStart:b.neck,jointEnd:b.spineShoulder}),a.push({jointStart:b.spineShoulder,jointEnd:b.spineMid}),a.push({jointStart:b.spineMid,jointEnd:b.spineBase}),a.push({jointStart:b.spineShoulder,jointEnd:b.shoulderRight}),a.push({jointStart:b.spineShoulder,jointEnd:b.shoulderLeft}),a.push({jointStart:b.spineBase,jointEnd:b.hipRight}),a.push({jointStart:b.spineBase,jointEnd:b.hipLeft}),a.push({jointStart:b.shoulderRight,jointEnd:b.elbowRight}),a.push({jointStart:b.elbowRight,jointEnd:b.wristRight}),a.push({jointStart:b.wristRight,jointEnd:b.handRight}),a.push({jointStart:b.handRight,jointEnd:b.handTipRight}),a.push({jointStart:b.wristRight,jointEnd:b.thumbRight}),a.push({jointStart:b.shoulderLeft,jointEnd:b.elbowLeft}),a.push({jointStart:b.elbowLeft,jointEnd:b.wristLeft}),a.push({jointStart:b.wristLeft,jointEnd:b.handLeft}),a.push({jointStart:b.handLeft,jointEnd:b.handTipLeft}),a.push({jointStart:b.wristLeft,jointEnd:b.thumbLeft}),a.push({jointStart:b.hipRight,jointEnd:b.kneeRight}),a.push({jointStart:b.kneeRight,jointEnd:b.ankleRight}),a.push({jointStart:b.ankleRight,jointEnd:b.footRight}),a.push({jointStart:b.hipLeft,jointEnd:b.kneeLeft}),a.push({jointStart:b.kneeLeft,jointEnd:b.ankleLeft}),a.push({jointStart:b.ankleLeft,jointEnd:b.footLeft}),a},_targetSelectedBody:function(a){var b=!1;if(this._selectedBody&&this._selectedBody.trackArea){var c=window.WindowsPreview.Kinect.JointType,d=a[c.spineBase].position.x/this._frameWidth,e=a[c.spineBase].position.z,f=this._selectedBody.trackArea.x,g=this._selectedBody.trackArea.z,h=this._selectedBody.trackArea.dephX,i=this._selectedBody.trackArea.dephZ,j=f-h,k=f+h,l=g-i,m=g+i;d>j&&k>d&&e>l&&m>e&&(b=!0)}return b},_populateBodyDatas:function(b,c,d){if(a._selectedBody){a._selectedBody.id=c;var e=d[a._JointType.spineBase].position.y-d[a._JointType.head].position.y,f=a._selectedBody.trackArea.handPushZ;a._selectedBody.pointMultiplier=1/(e/a._frameHeight)*1.5;var g=d[a._JointType.handLeft].position,h=d[a._JointType.handRight].position,i=d[a._JointType.head].position;h.y<d[a._JointType.spineBase].position.y&&i.z-h.z>f?(a._selectedBody.rightHandClosed=b.handRightState==WindowsPreview.Kinect.HandState.closed,a._selectedBody.rightHandOpen=b.handRightState==WindowsPreview.Kinect.HandState.open,a._fillRawBodyPoint(a._selectedBody.rightHand,h),a._selectedBody.handRightTracked=!0):a._selectedBody.handRightTracked=!1,g.y<d[a._JointType.spineBase].position.y&&i.z-g.z>f?(a._selectedBody.leftHandClosed=b.handLeftState==WindowsPreview.Kinect.HandState.closed,a._selectedBody.leftHandOpen=b.handLeftState==WindowsPreview.Kinect.HandState.open,a._fillRawBodyPoint(a._selectedBody.leftHand,g),a._selectedBody.handLeftTracked=!0):a._selectedBody.handLeftTracked=!1,a._fillRawBodyPoint(a._selectedBody.head,i),a._fillRawBodyPoint(a._selectedBody.neck,d[a._JointType.neck]),a._fillRawBodyPoint(a._selectedBody.spineBase,d[a._JointType.spineBase]),a._selectedBody.isTracked=!0,a._selectedBody.render()}},_fillRawBodyPoint:function(b,c){b.x=c.x/a._frameWidth,b.y=c.y/a._frameHeight,b.z=c.z},_createJointPoints:function(){for(var a=new Array,b=0;b<this._jointCount;++b)a.push({joint:0,x:.5,y:.5,z:0});return a},_reader_BodyFrameArrived:function(b){var c=b.frameReference.acquireFrame(),d=!1;if(null!=c&&(c.getAndRefreshBodyData(a._bodies),d=!0,c.close()),d){if(a._debugs)for(var e in a._debugs)a._debugs[e].disabledClear||a._debugs[e].clearCanvas();for(var f=0;f<a._bodies.length;++f){var g=a._bodies[f];if(g.isTracked){var h=g.joints,i=a._createJointPoints();if(a._bodyImageProcessor.processJointLocations(h,i)){var j=a._targetSelectedBody(i);if(j&&a._populateBodyDatas(g,f,i),a._debugs)for(var e in a._debugs)(!a._debugs[e].onlySelected||j)&&a._debugs[e].drawBody(g,i,f,g.clippedEdges,a._bones)}}}}}},e={ENUM:"enum",funct:function(){}},f=WinJS.Class.define(c,d,e);WinJS.Namespace.define("EkWinjs",{KinectBodyFrame:f})}(),function(){"use strict";var a=20,b=4,c=1,d=3,e=5,f="red",g="green",h="blue",i="green",j="yellow",k=function(a){this.id=a,this._bodyCanvas=document.getElementById(a),this._bodyContext=this._bodyCanvas.getContext("2d"),this._bodyColors=["#FF4611","#3A5CAC","#8CB7E8","#FFB718","#DC0031","#00ADBB"]},l={id:null,onlySelected:!1,disabledClear:!1,setSize:function(a,b){this._bodyCanvas.width=a,this._bodyCanvas.height=b},clearCanvas:function(){this._bodyContext.clearRect(0,0,this._bodyCanvas.width,this._bodyCanvas.height)},drawBody:function(a,b,c,d,e){this._drawBodyJoints(a.joints,b,this._bodyColors[c],e),this._updateHandState(a.handLeftState,b[window.WindowsPreview.Kinect.JointType.handLeft]),this._updateHandState(a.handRightState,b[window.WindowsPreview.Kinect.JointType.handRight]),this._drawClippedEdges(d)},_bodyCanvas:null,_bodyContext:null,_bodyColors:null,_jointCount:null,_drawBodyJoints:function(a,d,e,f){for(var g=f.length,h=0;g>h;++h){var k=f[h].jointStart,l=f[h].jointEnd,m=a.lookup(k),n=a.lookup(l);if(m.trackingState==window.WindowsPreview.Kinect.TrackingState.notTracked||n.trackingState==window.WindowsPreview.Kinect.TrackingState.notTracked)return;var o=c;m.trackingState==window.WindowsPreview.Kinect.TrackingState.tracked&&n.trackingState==window.WindowsPreview.Kinect.TrackingState.tracked&&(o=b),this._drawBone(d[k],d[l],o,e)}for(var p=null,q=0;q<this._jointCount;++q){var r=a.lookup(q).trackingState;r==kinect.TrackingState.tracked?p=i:r==kinect.TrackingState.inferred&&(p=j),null!=p&&this._drawJoint(d[q],p)}},_drawHand:function(b,c){this._bodyContext.globalAlpha=.75,this._bodyContext.beginPath(),this._bodyContext.fillStyle=c,this._bodyContext.arc(b.x,b.y,a,0,2*Math.PI,!0),this._bodyContext.fill(),this._bodyContext.closePath(),this._bodyContext.globalAlpha=1},_drawJoint:function(a,b){this._bodyContext.beginPath(),this._bodyContext.fillStyle=b,this._bodyContext.arc(a.position.x,a.position.y,d,0,2*Math.PI,!0),this._bodyContext.fill(),this._bodyContext.closePath()},_drawBone:function(a,b,c,d){this._bodyContext.beginPath(),this._bodyContext.strokeStyle=d,this._bodyContext.lineWidth=c,this._bodyContext.moveTo(a.position.x,a.position.y),this._bodyContext.lineTo(b.position.x,b.position.y),this._bodyContext.stroke(),this._bodyContext.closePath()},_updateHandState:function(a,b){switch(a){case window.WindowsPreview.Kinect.HandState.closed:this._drawHand(b,f);break;case window.WindowsPreview.Kinect.HandState.open:this._drawHand(b,g);break;case window.WindowsPreview.Kinect.HandState.lasso:this._drawHand(b,h)}},_drawClippedEdges:function(a){this._bodyContext.fillStyle="red",this._hasClippedEdges(a,window.WindowsPreview.Kinect.FrameEdges.bottom)&&this._bodyContext.fillRect(0,this._bodyCanvas.height-e,this._bodyCanvas.width,e),this._hasClippedEdges(a,window.WindowsPreview.Kinect.FrameEdges.top)&&this._bodyContext.fillRect(0,0,this._bodyCanvas.width,e),this._hasClippedEdges(a,window.WindowsPreview.Kinect.FrameEdges.left)&&this._bodyContext.fillRect(0,0,e,this._bodyCanvas.height),this._hasClippedEdges(a,window.WindowsPreview.Kinect.FrameEdges.right)&&this._bodyContext.fillRect(this._bodyCanvas.width-e,0,e,this._bodyCanvas.height)},_hasClippedEdges:function(a,b){return 0!=(a&b)}},m={ENUM:"enum",funct:function(){}},n=WinJS.Class.define(k,l,m);WinJS.Namespace.define("EkWinjs",{KinectDebug:n})}(),function(){"use strict";var a=!1,b=null,c=null,d=function(){if(c=this,!a)throw"Use EkWinjs.Kinect.getInstance() instead of new EkWinjs.Kinect() to instanciate the Kinect singleton.";this.bodyFrame=new EkWinjs.KinectBodyFrame,window.WindowsPreview?(this.platform=EkWinjs.Kinect.PLATFORMS.WIN8,this._checkAppState()):(this.platform=EkWinjs.Kinect.PLATFORMS.WEB,this._simulateKinect())},e={platform:"win8",bodyFrame:null,isWin8Platform:function(){return this.platform==EkWinjs.Kinect.PLATFORMS.WIN8},addCanvasDebug:function(a,b,c){b||(b=!1),this._debugs[a]=new EkWinjs.KinectDebug(a),this._debugs[a].onlySelected=b,this._debugs[a].disabledClear=c,this._frameDesc&&this._debugs[a].setSize(this._frameDesc.width,this._frameDesc.height),this.bodyFrame&&this.bodyFrame.setDebugs(this._debugs)},removeCanvasDebug:function(a){delete this._debugs[a]},_app:null,_activation:null,_kinect:null,_sensor:null,_frameDesc:null,_debugs:{},_autoMultiplier:1,_startKinect:function(){this._kinect=window.WindowsPreview.Kinect,this._sensor=this._kinect.KinectSensor.getDefault(),this._frameDesc=this._sensor.bodyIndexFrameSource.frameDescription,this.bodyFrame.setFrameSize(this._frameDesc.width,this._frameDesc.height),this.bodyFrame.start(this._sensor.bodyFrameSource,this._kinect.JointType,this._kinect.Body.jointCount),this._sensor.addEventListener("isavailablechanged",this._sensor_IsAvailableChanged),this._sensor.open()},_simulateKinect:function(){this.bodyFrame.startSimulate()},_checkAppState:function(){this._app=WinJS.Application,this._activation=Windows.ApplicationModel.Activation,this._app.start(),this._app.onactivated=function(a){a.detail.kind===c._activation.ActivationKind.launch&&(a.detail.previousExecutionState!==c._activation.ApplicationExecutionState.terminated&&c._startKinect(),a.setPromise(WinJS.UI.processAll()))},this._app.onunload=function(){this.bodyFrame&&this.bodyFrame.close(),null!=this._sensor&&this._sensor.close()}},_sensor_IsAvailableChanged:function(){WinJS.Resources.dispatchEvent(EkWinjs.Kinect.Events.Application.AVAILABILITY,c._sensor.isAvailable)}},f={PLATFORMS:{WIN8:"win8",WEB:"web"},Events:{Application:{AVAILABILITY:"EkWinjs.Kinect.Events.Application.AVAILABILITY"},Pointer:{MOVE:"EkWinjs.Kinect.Events.Pointer.MOVE",OVER:"EkWinjs.Kinect.Events.Pointer.OVER",OUT:"EkWinjs.Kinect.Events.Pointer.OUT",DOWN:"EkWinjs.Kinect.Events.Pointer.DOWN",UP:"EkWinjs.Kinect.Events.Pointer.UP",HOLD_START:"EkWinjs.Kinect.Events.Pointer.HOLD_START",HOLD_PROGRESS:"EkWinjs.Kinect.Events.Pointer.HOLD_PROGRESS",HOLD_END:"EkWinjs.Kinect.Events.Pointer.HOLD_END"}},VERSION:"alpha_0.0.1",getInstance:function(){return b||(a=!0,b=new EkWinjs.Kinect,a=!1),b},multiplyPixelPoint:function(a,b,c){var d=b*c,e=.5*(d-b);return a*d-e}},g=WinJS.Class.define(d,e,f);WinJS.Namespace.define("EkWinjs",{Kinect:g})}(),function(){"use strict";var a=10,b=60,c=0,d=0,e=function(a){this._body=a},f={name:"",x:0,y:0,appWidth:window.innerWidth,appHeight:window.innerHeight,addEventListener:function(a,b,c,d){var e="";switch(c.id&&""!=c.id?e=c.id:c.className&&(e=c.className),a){case EkWinjs.Kinect.Events.Pointer.MOVE:this._funcsMove[e]=b;break;case EkWinjs.Kinect.Events.Pointer.OVER:this._funcsOver[e]=b;break;case EkWinjs.Kinect.Events.Pointer.OUT:this._funcsOut[e]=b;break;case EkWinjs.Kinect.Events.Pointer.UP:this._funcsUp[e]=b;break;case EkWinjs.Kinect.Events.Pointer.DOWN:this._funcsDown[e]=b;break;case EkWinjs.Kinect.Events.Pointer.HOLD_START:this._funcsHoldStart[e]=b;break;case EkWinjs.Kinect.Events.Pointer.HOLD_PROGRESS:this._funcsHoldProgress[e]=b;break;case EkWinjs.Kinect.Events.Pointer.HOLD_END:this._funcsHoldEnd[e]=b}var f=!1;d&&(f=d.handClosed),this._targets[e]={target:c,isOver:!1,isHold:!1,forceHandClosed:f,holdComplete:!1}},removeEventListener:function(a,b,c){var d="";switch(c.id&&""!=c.id?d=c.id:c.className&&(d=c.className),a){case EkWinjs.Kinect.Events.Pointer.MOVE:this._funcsMove[d]=null;break;case EkWinjs.Kinect.Events.Pointer.OVER:this._funcsOver[d]=null;break;case EkWinjs.Kinect.Events.Pointer.OUT:this._funcsOut[d]=null;break;case EkWinjs.Kinect.Events.Pointer.UP:this._funcsUp[d]=null;break;case EkWinjs.Kinect.Events.Pointer.DOWN:this._funcsDown[d]=null;break;case EkWinjs.Kinect.Events.Pointer.HOLD_START:this._funcsHoldStart[d]=null;break;case EkWinjs.Kinect.Events.Pointer.HOLD_PROGRESS:this._funcsHoldProgress[d]=null;break;case EkWinjs.Kinect.Events.Pointer.HOLD_END:this._funcsHoldEnd[d]=null}this._targets[d]&&(this._targets[d]=null)},render:function(){var a=this._body.handLeftTracked||this._body.handRightTracked,b=!1,c=!1;this._body.isTracked&&(a?(this._body.handRightTracked&&this._body.rightHand.z<this._body.leftHand.z?(b=this._body.rightHandClosed,c=this._body.rightHandOpen,this.x=EkWinjs.Kinect.multiplyPixelPoint(this._body.rightHand.x,this.appWidth,this._body.pointMultiplier),this.y=EkWinjs.Kinect.multiplyPixelPoint(this._body.rightHand.y,this.appHeight,this._body.pointMultiplier),a=!0):this._body.handLeftTracked&&(b=this._body.leftHandClosed,c=this._body.leftHandOpen,this.x=EkWinjs.Kinect.multiplyPixelPoint(this._body.leftHand.x,this.appWidth,this._body.pointMultiplier),this.y=EkWinjs.Kinect.multiplyPixelPoint(this._body.leftHand.y,this.appHeight,this._body.pointMultiplier),a=!0),b&&!this._isDown?(this._renderDownCallbacks(),this._isDown=!0):c&&this._isDown&&(this._renderUpCallbacks(),this._isDown=!1),this._userActive||(this._userActive=!0)):this._userActive&&(this._userActive=!1,this._renderUpCallbacks(),this._isDown=!1),this._renderHoldCallbacks(b),this._renderOverOutCallbacks(),this._renderMoveCallbacks())},startSimulate:function(){function a(a){c.x=a.clientX+(window.scrollX?window.scrollX:document.documentElement.scrollLeft),c.y=a.clientY+(window.scrollY?window.scrollY:document.documentElement.scrollTop)}function b(){c._renderHoldCallbacks(c._isDown),window.requestAnimationFrame(b)}var c=this;c._userActive=!1,document.addEventListener("mousedown",function(b){c._isDown=!0,a(b),c._renderDownCallbacks()}),document.addEventListener("mouseup",function(b){c._isDown=!1,a(b),c._renderUpCallbacks()}),document.addEventListener("mousemove",function(d){a(d),c._renderMoveCallbacks(),c._renderOverOutCallbacks(),c._userActive||(b(),c._userActive=!0)})},stopSimulate:function(){cancelAnimationFrame(this.startSimulate)},_body:null,_funcsMove:{},_funcsOver:{},_funcsOut:{},_funcsUp:{},_funcsDown:{},_funcsHoldStart:{},_funcsHoldProgress:{},_funcsHoldEnd:{},_targets:{},_isDown:!1,_userActive:!1,_getRectangle:function(a){var b={};b.width=a.offsetWidth,b.height=a.offsetHeight,b.x=0,b.y=0;var c=a;do isNaN(c.offsetLeft)||(b.x+=c.offsetLeft),isNaN(c.offsetTop)||(b.y+=c.offsetTop);while(c=c.offsetParent);return b},_checkIfIsOver:function(a){var b,c=!1;return b=a.width&&a.x?a:this._getRectangle(a),this.x>b.x&&this.x<b.x+b.width&&this.y>b.y&&this.y<b.y+b.height&&(c=!0),c},_renderHoldCallbacks:function(e){for(var f in this._funcsHoldStart)null!=this._funcsHoldStart[f]&&(this._targets[f]&&this._checkIfIsOver(this._targets[f].target)?!this._targets[f]||this._targets[f].forceHandClosed&&!e||this._targets[f].holdComplete||(this._targets[f].isHold?this._targets[f].isHold&&(c>=b?(c=0,this._targets[f].holdComplete=!0,this._targets[f].isHold=!1,this._funcsHoldEnd[f]&&this._funcsHoldEnd[f](this._targets[f].target,1)):(c++,this._funcsHoldProgress[f]&&this._funcsHoldProgress[f](this._targets[f].target,c/b))):a>d?d++:(d=0,c=0,this._targets[f].isHold=!0,this._funcsHoldStart[f]&&this._funcsHoldStart[f](this._targets[f].target,c/b))):this._targets[f]&&this._targets[f].isHold&&(d=0,c=0,this._targets[f].holdComplete=!1,this._targets[f].isHold=!1))},_renderOverOutCallbacks:function(){var a=!1;for(var b in this._funcsOver)null!=this._funcsOver[b]&&this._targets[b]&&(a=this._checkIfIsOver(this._targets[b].target),!this._targets[b].isOver&&a&&(this._targets[b].isOver=!0,this._funcsOver[b](this._targets[b].target)));for(var b in this._funcsOut)null!=this._funcsOut[b]&&this._targets[b]&&(a=this._checkIfIsOver(this._targets[b].target),this._targets[b].isOver&&!a&&(this._targets[b].isOver=!1,this._funcsOut[b](this._targets[b].target)))},_renderMoveCallbacks:function(){this._callListenersOnTarget(this._funcsMove)},_renderUpCallbacks:function(){this._callListenersOnTarget(this._funcsUp)},_renderDownCallbacks:function(){this._callListenersOnTarget(this._funcsDown)},_callListenersOnTarget:function(a){for(var b in a)null!=a[b]&&this._targets[b]&&(!this._targets[b].target||this._targets[b].target&&this._checkIfIsOver(this._targets[b].target))&&a[b](this._targets[b].target)},_funct:function(){}},g={ENUM:"enum",funct:function(){}},h=WinJS.Class.define(e,f,g);WinJS.Namespace.define("EkWinjs",{KinectPointer:h})}(),function(){"use strict";var a,b=function(b,c,d,e){d=d?d:.2,e=e?e:.5,this._body=b,a=this,this._dragHelper=new EkWinjs.DragHelper(d,e),this._body&&this._body.pointer&&(this._body.pointer.addEventListener(EkWinjs.Kinect.Events.Pointer.MOVE,this._getMousePosition,c),this._body.pointer.addEventListener(EkWinjs.Kinect.Events.Pointer.UP,this._onUpHandler,c),this._body.pointer.addEventListener(EkWinjs.Kinect.Events.Pointer.DOWN,this._onDownHandler,c))},c={x:0,y:0,update:function(){a._dragHelper.needUpdate&&(a._dragHelper.updateDrag(a._pointerX,a._pointerY),a.x=a._dragHelper.x,a.y=a._dragHelper.y)},setLimitY:function(a,b){this._dragHelper.minY=a,this._dragHelper.maxY=b},setLimitX:function(a,b){this._dragHelper.minX=a,this._dragHelper.maxX=b},setInitX:function(a){this._dragHelper.x=this._dragHelper._endX=a},setInitY:function(a){this._dragHelper.initY=this._dragHelper._endY=a},isRefresh:function(){return this._dragHelper.needUpdate},_dragHelper:null,_pointerX:0,_pointerY:0,_body:null,_getMousePosition:function(){a._pointerX=a._body.pointer.x,a._pointerY=a._body.pointer.y},_onDownHandler:function(){a._pointerX=a._body.pointer.x,a._pointerY=a._body.pointer.y,a._dragHelper.startDrag(a._pointerX,a._pointerY)},_onUpHandler:function(){a._dragHelper.stopDrag()}},d={},e=WinJS.Class.define(b,c,d);WinJS.Namespace.define("EkWinjs",{DragController:e})}(),function(){"use strict";var a=null,b=function(b,c){a=this,a.velocity=b?b:.2,a.sensibilityRatio=c?c:.5},c={velocity:0,sensibilityRatio:0,isDrag:!1,needUpdate:!1,x:0,y:0,minX:0/0,minY:0/0,maxY:0/0,maxX:0/0,_dragX:0,_dragY:0,_startX:0,_endX:0,_startY:0,_endY:0,_endVelocityCallback:null,_saveVelocityValue:0,startDrag:function(b,c){a.isDrag=!0,a.needUpdate=!0,a._startX=b*a.sensibilityRatio+a._endX,a._startY=c*a.sensibilityRatio+a._endY},stopDrag:function(b){a.isDrag&&(a.isDrag=!1,a._endX=a._dragX,a._endY=a._dragY,a._endVelocityCallback=b)},updateDrag:function(b,c){a.isDrag&&(a._dragX=a._startX-b*a.sensibilityRatio,a._dragY=a._startY-c*a.sensibilityRatio,!isNaN(a.minY)&&a._dragY<a.minY&&(a._dragY=a.minY),!isNaN(a.maxY)&&a._dragY>a.maxY&&(a._dragY=a.maxY),!isNaN(a.minX)&&a._dragX<a.minX&&(a._dragX=a.minX),!isNaN(a.maxX)&&a._dragX>a.maxX&&(a._dragX=a.maxX)),Math.abs(a.x-a._dragX)<1&&Math.abs(a.y-a._dragY)<1?a.isDrag||(null!=a._endVelocityCallback&&a._endVelocityCallback(),a._endVelocityCallback=null,a.needUpdate=!1,a._dragX=0,a._dragY=0,a._startX=0,a._startY=0):(a.x+=(a._dragX-a.x)*a.velocity,a.y+=(a._dragY-a.y)*a.velocity)},_name:"",_render:function(){}},d={},e=WinJS.Class.define(b,c,d);a=e,WinJS.Namespace.define("EkWinjs",{DragHelper:e})}();